<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amorův lov na dopisy - OPRAVENO</title>
    <style>
        :root {
            --gold: #ffd700;
            --heart-red: #ff3366;
            --skin: #ffe0bd;
        }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: radial-gradient(circle, #ffafbd, #ffc3a0);
            height: 100vh;
            width: 100vw;
            cursor: none; /* Skryje výchozí kurzor */
            user-select: none;
        }

        /* --- AMOR (POSTAVA) --- */
        #cupid {
            position: fixed;
            width: 100px;
            height: 100px;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            display: block; /* Ujistíme se, že je vidět */
        }

        .cupid-head {
            position: absolute;
            width: 30px;
            height: 30px;
            background: var(--skin);
            border-radius: 50%;
            top: 5px;
            left: 35px;
            box-shadow: inset -2px -2px 5px rgba(0,0,0,0.1);
        }

        /* Vlasy */
        .cupid-head::after {
            content: '☁☁';
            position: absolute;
            top: -8px;
            left: -2px;
            color: #d35400;
            font-size: 20px;
            letter-spacing: -2px;
        }

        /* Oko a mrkání */
        .eye {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #333;
            border-radius: 50%;
            top: 12px;
            left: 18px;
            animation: blink 3s infinite;
        }

        @keyframes blink {
            0%, 90%, 100% { transform: scaleY(1); }
            95% { transform: scaleY(0.1); }
        }

        .cupid-body {
            position: absolute;
            width: 25px;
            height: 35px;
            background: var(--skin);
            border-radius: 10px;
            top: 32px;
            left: 38px;
        }

        /* Křídla Amora */
        .wing {
            position: absolute;
            width: 45px;
            height: 25px;
            background: #fff;
            border-radius: 50% 50% 10% 50%;
            top: 25px;
            z-index: -1;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .wing-left { 
            left: 5px; 
            animation: flapLeft 0.2s infinite alternate; 
            transform-origin: right center;
        }
        .wing-right { 
            right: 5px; 
            animation: flapRight 0.2s infinite alternate; 
            transform-origin: left center;
            transform: scaleX(-1);
        }

        @keyframes flapLeft { from { transform: rotate(15deg); } to { transform: rotate(-25deg); } }
        @keyframes flapRight { from { transform: scaleX(-1) rotate(15deg); } to { transform: scaleX(-1) rotate(-25deg); } }

        /* Luk */
        .bow {
            position: absolute;
            width: 4px;
            height: 40px;
            border-left: 3px solid #8b4513;
            border-radius: 50%;
            left: 65px;
            top: 30px;
            transform: rotate(-15deg);
        }

        /* --- OBÁLKA --- */
        #envelope {
            position: absolute;
            width: 50px;
            height: 35px;
            background: #fff;
            border: 1px solid #ddd;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            top: 50%; /* Startovní pozice */
            left: 50%;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .envelope::before { /* Klopa */
            content: "";
            position: absolute;
            top: 0; left: 0;
            border-left: 25px solid transparent;
            border-right: 25px solid transparent;
            border-top: 18px solid #eee;
        }

        .env-heart {
            color: var(--heart-red);
            font-size: 18px;
            position: relative;
            z-index: 2;
        }

        /* Křídla obálky */
        .env-wing {
            position: absolute;
            width: 60px;
            height: 30px;
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid var(--gold);
            border-radius: 50% 50% 0 0;
            top: -15px;
        }
        .env-wing.l { left: -50px; animation: eFlap 0.1s infinite alternate; transform-origin: right bottom; }
        .env-wing.r { right: -50px; animation: eFlap 0.1s infinite alternate; transform-origin: left bottom; transform: scaleX(-1); }

        @keyframes eFlap { from { transform: rotate(-40deg); } to { transform: rotate(10deg); } }

        /* --- ŠÍP --- */
        .arrow {
            position: absolute;
            width: 40px;
            height: 3px;
            background: #8b4513;
            z-index: 50;
            pointer-events: none;
        }
        .arrow::after {
            content: '❤';
            position: absolute;
            right: -10px;
            top: -8px;
            color: var(--heart-red);
            font-size: 14px;
        }

        /* Částice */
        .particle {
            position: absolute;
            pointer-events: none;
            z-index: 200;
        }

        .hint {
            position: fixed;
            bottom: 20px;
            width: 100%;
            text-align: center;
            color: #fff;
            font-family: sans-serif;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>

    <div id="cupid">
        <div class="wing wing-left"></div>
        <div class="wing wing-right"></div>
        <div class="cupid-body"></div>
        <div class="cupid-head">
            <div class="eye"></div>
        </div>
        <div class="bow"></div>
    </div>

    <div id="envelope">
        <div class="env-wing l"></div>
        <div class="env-wing r"></div>
        <div class="env-heart">❤</div>
    </div>

    <div class="hint">Pohybuj myší a klikni pro výstřel!</div>

    <script>
        const cupid = document.getElementById('cupid');
        const envelope = document.getElementById('envelope');
        
        // Inicializace pozic
        let envX = window.innerWidth / 2;
        let envY = window.innerHeight / 2;
        let envSpeedX = 6;
        let envSpeedY = 4;
        let isDead = false;

        // 1. Sledování myši (Amor)
        window.addEventListener('mousemove', (e) => {
            cupid.style.left = e.clientX + 'px';
            cupid.style.top = e.clientY + 'px';
        });

        // 2. Pohyb obálky
        function update() {
            if (!isDead) {
                envX += envSpeedX;
                envY += envSpeedY;

                // Odrazy
                if (envX <= 50 || envX >= window.innerWidth - 100) envSpeedX *= -1;
                if (envY <= 50 || envY >= window.innerHeight - 80) envSpeedY *= -1;

                envelope.style.left = envX + 'px';
                envelope.style.top = envY + 'px';
            }
            requestAnimationFrame(update);
        }

        // 3. Střelba
        window.addEventListener('mousedown', (e) => {
            if (isDead) return;

            const arrow = document.createElement('div');
            arrow.className = 'arrow';
            
            // Start od Amora
            let startX = e.clientX;
            let startY = e.clientY;
            
            arrow.style.left = startX + 'px';
            arrow.style.top = startY + 'px';
            document.body.appendChild(arrow);

            // Výpočet směru k obálce
            const targetX = envX + 25;
            const targetY = envY + 17;
            const angle = Math.atan2(targetY - startY, targetX - startX);
            
            arrow.style.transform = `rotate(${angle}rad)`;

            let curX = startX;
            let curY = startY;
            const speed = 18;

            function moveArrow() {
                curX += Math.cos(angle) * speed;
                curY += Math.sin(angle) * speed;
                arrow.style.left = curX + 'px';
                arrow.style.top = curY + 'px';

                // Kolize
                const d = Math.hypot(curX - (envX + 25), curY - (envY + 17));
                if (d < 35) {
                    hit();
                    arrow.remove();
                    return;
                }

                if (curX < 0 || curX > window.innerWidth || curY < 0 || curY > window.innerHeight) {
                    arrow.remove();
                } else {
                    requestAnimationFrame(moveArrow);
                }
            }
            moveArrow();
        });

        function hit() {
            isDead = true;
            envelope.style.display = 'none';
            
            // Vyprsknutí srdíček
            for(let i=0; i<80; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.innerHTML = '❤';
                p.style.color = `hsl(${Math.random()*360}, 100%, 50%)`;
                document.body.appendChild(p);
                
                let px = envX + 25;
                let py = envY + 17;
                let vx = (Math.random() - 0.5) * 20;
                let vy = (Math.random() - 0.5) * 20;
                
                function animP() {
                    px += vx; py += vy; vy += 0.5;
                    p.style.left = px + 'px';
                    p.style.top = py + 'px';
                    p.style.opacity =

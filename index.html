<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amorův šíp</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #e0f7fa; /* Světle modré pozadí */
            cursor: none; /* Skryje výchozí kurzor */
        }

        /* Vlastní kurzor - luk se šípem */
        #custom-cursor {
            position: fixed;
            pointer-events: none; /* Aby neblokoval interakce */
            width: 50px; /* Přizpůsobit velikost */
            height: 50px;
            background-image: url('image_4.png'); /* Použití obrázku luku se šípem */
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            z-index: 1000;
            transform: translate(-50%, -50%);
        }

        /* Létající obálka */
        #flying-envelope {
            position: absolute;
            width: 60px; /* Přizpůsobit velikost */
            height: 40px;
            background-image: url('image_3.png'); /* Použití obrázku obálky s křídly a srdíčkem */
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            transition: top 2s linear, left 2s linear; /* Plynulý pohyb */
        }

        /* Vystřelený šíp */
        .projectile {
            position: absolute;
            width: 20px;
            height: 5px;
            background-color: #8b4513; /* Hnědá barva šípu */
            border-radius: 2px;
            pointer-events: none;
        }
        
        /* Částice - srdíčka */
        .particle {
            position: absolute;
            color: #ff0000; /* Červená barva srdíček */
            font-size: 16px;
            pointer-events: none;
            user-select: none;
        }
    </style>
</head>
<body>

    <div id="custom-cursor"></div>
    <div id="flying-envelope"></div>

    <script>
        const cursor = document.getElementById('custom-cursor');
        const envelope = document.getElementById('flying-envelope');
        let envelopeX = window.innerWidth / 2;
        let envelopeY = window.innerHeight / 2;

        // Sledování pohybu myši
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });

        // Pohyb obálky
        function moveEnvelope() {
            const maxX = window.innerWidth - envelope.offsetWidth;
            const maxY = window.innerHeight - envelope.offsetHeight;
            
            const nextX = Math.random() * maxX;
            const nextY = Math.random() * maxY;

            envelope.style.left = nextX + 'px';
            envelope.style.top = nextY + 'px';
            
            envelopeX = nextX;
            envelopeY = nextY;

            setTimeout(moveEnvelope, 2000); // Pohyb každé 2 sekundy
        }
        moveEnvelope();

        // Střelba po kliknutí
        document.addEventListener('click', (e) => {
            const startX = e.clientX;
            const startY = e.clientY;
            
            const targetX = envelopeX + envelope.offsetWidth / 2;
            const targetY = envelopeY + envelope.offsetHeight / 2;

            shootArrow(startX, startY, targetX, targetY);
        });

        function shootArrow(startX, startY, targetX, targetY) {
            const arrow = document.createElement('div');
            arrow.classList.add('projectile');
            document.body.appendChild(arrow);

            arrow.style.left = startX + 'px';
            arrow.style.top = startY + 'px';

            const dx = targetX - startX;
            const dy = targetY - startY;
            const angle = Math.atan2(dy, dx);
            const distance = Math.sqrt(dx * dx + dy * dy);
            const speed = 10; // Rychlost šípu
            const duration = distance / speed * 10; // Trvání letu

            arrow.style.transform = `rotate(${angle}rad)`;

            arrow.animate([
                { left: startX + 'px', top: startY + 'px' },
                { left: targetX + 'px', top: targetY + 'px' }
            ], {
                duration: duration,
                easing: 'linear',
                fill: 'forwards'
            }).onfinish = () => {
                arrow.remove();
                checkHit();
            };
        }

        function checkHit() {
            // Pro jednoduchost předpokládáme zásah, pokud byl výstřel na obálku
            createExplosion(envelopeX + envelope.offsetWidth / 2, envelopeY + envelope.offsetHeight / 2);
        }

        function createExplosion(x, y) {
            for (let i = 0; i < 20; i++) {
                createParticle(x, y);
            }
        }

        function createParticle(x, y) {
            const particle = document.createElement('div');
            particle.classList.add('particle');
            particle.innerHTML = '❤️';
            document.body.appendChild(particle);
            
            const angle = Math.random() * Math.PI * 2;
            const speed = Math.random() * 5 + 2;
            const life = Math.random() * 1000 + 500;
            
            let posX = x;
            let posY = y;

            const startTime = Date.now();

            function animate() {
                const elapsed = Date.now() - startTime;
                if (elapsed > life) {
                    particle.remove();
                    return;
                }

                posX += Math.cos(angle) * speed;
                posY += Math.sin(angle) * speed + 1; // Gravitace

                particle.style.left = posX + 'px';
                particle.style.top = posY + 'px';
                particle.style.opacity = 1 - elapsed / life;

                requestAnimationFrame(animate);
            }
            requestAnimationFrame(animate);
        }
    </script>
</body>
</html>
